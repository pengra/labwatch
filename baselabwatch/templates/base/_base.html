{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="labwatch is a tool used for tracking library usage">
  <meta name="author" content="Norton Pengra (Qwergram)">
  <link rel="icon" href="/favicon.ico">
  
  {% block predocument %}
    <!-- Styles and scripts that need to be loaded before document -->
  {% endblock %}

  {% if school %}
    <title>{{school}} Library - {% block subtitle %}Overview{% endblock %}</title>
  {% else %}
    <title>Oops!</title>
  {% endif %}

  <!-- Bootstrap core CSS -->
  <link href="{% static 'bootstrap/bootstrap.min.css' %}" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="{% static 'base/dashboard.css' %}" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="{% static 'bootstrap/font-awesome.min.css' %}" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    {% if school %}
      <a class="navbar-brand" href="#">{{school}} Library</a>
    {% else %}
      <a class="navbar-brand" href="#">LabWatch</a>
    {% endif %}
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#title-nav-bar" aria-controls="title-nav-bar"
      aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

    <div class="collapse navbar-collapse" id="title-nav-bar">
      <ul class="navbar-nav mr-auto" id="title-nav-bar-list">
          <li class="nav-item">
            <a class="nav-link disabled">Loading...</a>
          </li>
        <!-- Title links -->
      </ul>
    </div>
  </nav>

  <div class="container-fluid" id="website-content">
    
  </div>

  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="{% static 'jquery/jquery.min.js' %}"></script>
  <script src="{% static 'base/popper.min.js' %}"></script>
  <script src="{% static 'bootstrap/bootstrap.min.js' %}"></script>
  
  <script src="{% static 'react/react.js' %}"></script>
  <script src="{% static 'react/react-dom.js' %}"></script>
  <script src="{% static 'babel/babel.min.js' %}"></script>
  
  <script src="{% static 'react/components/exceptions.jsx' %}" type="text/babel"></script>
  <script src="{% static 'react/components/navigation.jsx' %}" type="text/babel"></script>
  <script src="{% static 'react/components/tabs.jsx' %}" type="text/babel"></script>
  <script src="{% static 'react/components/main.jsx' %}" type="text/babel"></script>
  <script src="{% static 'react/components/forms.jsx' %}" type="text/babel"></script>
  
  
  {% if current_app == "baselabwatch" %}
    <script src="{% static 'base/jsx/baselabwatch.jsx' %}" type="text/babel"></script>
  {% endif %}

  {% block scripts %}
    <!-- scripts for the end of the document -->
  {% endblock %}

  <!-- Apply dom renders here to pass in vals -->
  {% autoescape off %}
  <script type="text/babel">
  
    // Django Data -> ReactJS Data
    const titleLinks = {{title_links}};
    const currentApp = "{{current_app}}"
    
    // Render zone
    ReactDOM.render(
      <TitleNavBar 
        links={titleLinks} 
        currentApp={currentApp}
      />,
      document.getElementById('title-nav-bar')
    );

    // try {
      ReactDOM.render(
        <MainContent 
          leftLinks={leftNavBarLinks}
        />,
        document.getElementById('website-content')
      )
    // } catch (ReferenceError) {
    //   console.error("Missing MainContent class for '{{current_app}}'. Make sure the Django Template is setup correctly.")
    // }

  </script>
  {% endautoescape %}

  <script type="text/javascript">
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip(); 
    });
  </script>
</body>

</html>